<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Contagem</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
    /* Estilo principal e fundo */
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      overscroll-behavior: none;
      font-family: Arial, sans-serif;
      color: #fff;
      text-align: center;
    }

    #bg {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: radial-gradient(ellipse at bottom, #0b0c2a 0%, #000 100%);
      z-index: 0;
      overflow: hidden;
    }

    .estrela,
    .cometa,
    .nuvem,
    .heart {
      position: absolute;
      will-change: transform, opacity;
    }

    .estrela {
      width: 2px;
      height: 2px;
      background: #fff;
      border-radius: 50%;
      animation: brilhar 2s ease-in-out infinite;
      opacity: .8;
    }

    @keyframes brilhar {

      0%,
      100% {
        opacity: .2
      }

      50% {
        opacity: 1
      }
    }

    .cometa {
      width: 150px;
      height: 2px;
      background: linear-gradient(90deg, transparent, #fff);
      transform: rotate(60deg);
      opacity: .6;
      animation: queda 10s ease-in-out infinite;
    }

    @keyframes queda {
      0% {
        transform: translate(-150px, -150px) rotate(55deg);
        opacity: 0
      }

      20% {
        opacity: 1
      }

      100% {
        transform: translate(100vw, 100vh) rotate(55deg);
        opacity: 0
      }
    }

    .nuvem {
      width: 200px;
      height: 60px;
      background: #fff;
      border-radius: 100px;
      opacity: .05;
      box-shadow: 30px 0 0 #fff, 60px 10px 0 #fff, 90px 0 0 #fff;
      animation: moverNuvem linear infinite;
    }

    @keyframes moverNuvem {
      0% {
        left: -300px
      }

      100% {
        left: 100vw
      }
    }

    .heart {
      font-size: 24px;
      opacity: .8;
      z-index: 0;
      animation: float 8s linear infinite;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) scale(1);
        opacity: 0
      }

      50% {
        opacity: 1
      }

      100% {
        transform: translateY(-10vh) scale(1.5);
        opacity: 0
      }
    }

    #app {
      position: relative;
      z-index: 1;
      width: 100%;
      height: 100%;
    }

    #contador-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 2;
    }

    #foto-com-borda {
      padding: 8px;
      border-radius: 12px;
      background: linear-gradient(45deg, #ffffff, #ffffff00, #ffffff);
      background-size: 600% 600%;
      animation: gradiente 10s ease infinite;
      display: inline-block;
      padding-bottom: 80px;
    }

    @keyframes gradiente {
      0% {
        background-position: 0 50%
      }

      50% {
        background-position: 100% 50%
      }

      100% {
        background-position: 0 50%
      }
    }

    .carrossel-container {
      width: 300px;
      max-width: 90vw;
      overflow: hidden;
      margin: 0 auto;
      position: relative;
    }

    .carrossel {
      display: flex;
      transition: transform 0.5s ease-in-out;
    }

    .carrossel img {
      width: 100%;
      flex-shrink: 0;
      border-radius: 10px;
      object-fit: cover;
    }

    .indicadores {
      display: flex;
      justify-content: center;
      gap: 6px;
      margin-top: 12px;
    }

    .indicadores span {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #ffffff33;
      transition: background 0.3s;
    }

    .indicadores span.ativo {
      background: #fff;
    }

    #contador {
      font-size: 1.2rem;
      font-weight: bold;
      background: linear-gradient(90deg, #ffffff, #fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradiente 5s ease infinite;
      text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.6);
    }

    #topo-texto {
      position: absolute;
      top: 10px;
      width: 100%;
      text-align: center;
      font-size: 0.7rem;
      color: #fff;
      z-index: 10;
      text-shadow: 1px 1px 2px #000;
      pointer-events: none;
    }


    /* Visualizador de Ã¡udio fixo */
    #container-visualizador {
      position: fixed;
      bottom: 60px;
      left: 0;
      right: 0;
      width: 100%;
      max-width: 550px;
      height: 240px;
      margin: 0 auto;
      z-index: 3;
      pointer-events: none;
      will-change: transform;
    }
    #lyrics-container {
      position: fixed;
      bottom: 5%;
      width: 100%;
      z-index: 20;
      pointer-events: none;
      padding: 0 5vw;
      display: flex;
      justify-content: center;
    }

    .lyrics-line {
      max-width: 100%;
      background: rgba(0, 0, 0, 0);
      padding: 16px 24px;
      border-radius: 12px;
      font-size: 1.8rem;
      font-weight: 900;
      color: #fff;
      line-height: 1.4;
      text-align: left;
      text-transform: uppercase;
      white-space: pre-line;
      box-shadow: 0 4px 16px rgba(0,0,0,0.5);
      animation: entradaReels 0.6s ease-out forwards;
      opacity: 0;
      transform: translateY(20px);
    }

    @keyframes entradaReels {
      0% {
        opacity: 0;
        transform: translateY(20px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @media (max-width: 600px) {
      .lyrics-line {
        font-size: 1.6rem;
        padding: 14px 20px;
      }
    }

    #visualizador {
      width: 100%;
      height: 100%;
      display: block;
      pointer-events: none;
      will-change: contents;
    }

    h1 {
      font-size: 1rem;
      margin-bottom: 10px;
      text-shadow: 1px 1px 4px #000;
    }

    h1::before {
      content: "ðŸ’—";
      margin-right: 8px;
      animation: pulse 1s infinite;
    }

    @keyframes pulse {
      0% {
        transform: scale(1)
      }

      50% {
        transform: scale(1.3)
      }

      100% {
        transform: scale(1)
      }
    }

    @media only screen and (max-width: 600px) {

      /* para telas atÃ© 600px de largura (mobile) */
      #container-visualizador {
        bottom: -50px;
        /* desce o visualizador um pouco mais */
      }
    }
  </style>
</head>

<body>
  <div id="topo-texto">"O amor nÃ£o se alegra com a injustiÃ§a,<br>
    mas se alegra com a verdade.<br>
    Tudo sofre, tudo crÃª, <br>
    tudo espera, tudo suporta.<br>
    O amor nunca perece.<br>
    <br>
    1 CorÃ­ntios 13:6-8"
  </div>
  <div id="bg"></div>
  <div id="app">
  <div id="lyrics-container">
</div>
    <audio id="player" autoplay loop crossorigin="anonymous">
      <source src="https://unwickbr.github.io/qr-code-site/Ter%C3%A7a.mp3" type="audio/mpeg">
    </audio>

    <div id="contador-container">
      <div id="foto-com-borda">
        <div class="carrossel-container">
          <div class="carrossel" id="carrossel">
            <img src="https://unwickbr.github.io/qr-code-site/Image.jpg" alt="1">
            <img src="https://unwickbr.github.io/qr-code-site/Image2.jpg" alt="2">
            <img src="https://unwickbr.github.io/qr-code-site/Image3.jpg" alt="3">
            <img src="https://unwickbr.github.io/qr-code-site/Image4.jpg" alt="4">
          </div>
          <div class="indicadores" id="indicadores">
            <span></span><span></span><span></span><span></span>
          </div>
        </div>
        <h1>Quanto tempo nos conhecemos:</h1>
        <div id="contador">Calculando...</div>
      </div>
    </div>
  </div>
  <!-- Visualizador de Ã¡udio -->
  <div id="container-visualizador">
    <canvas id="visualizador" width="300" height="240"></canvas>
  </div>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const bg = document.getElementById('bg');
      for (let i = 0; i < 150; i++) {
        const s = document.createElement('div');
        s.className = 'estrela';
        s.style.top = Math.random() * 100 + 'vh';
        s.style.left = Math.random() * 100 + 'vw';
        s.style.animationDuration = 1 + Math.random() * 2 + 's';
        bg.appendChild(s);
      }
      for (let i = 0; i < 5; i++) {
        const c = document.createElement('div');
        c.className = 'cometa';
        c.style.top = Math.random() * 2 + 'vh';
        c.style.left = -200 - Math.random() * 100 + 'px';
        c.style.animationDelay = Math.random() * 20 + 's';
        bg.appendChild(c);
      }
      for (let i = 0; i < 7; i++) {
        const n = document.createElement('div');
        n.className = 'nuvem';
        n.style.top = (2 + Math.random() * 80) + 'vh';
        n.style.transform = 'scale(' + (0.5 + Math.random() * 1.5) + ')';
        n.style.animationDuration = 60 + Math.random() * 40 + 's';
        bg.appendChild(n);
      }
      const emojis = ['ðŸ’–', 'ðŸ’˜', 'ðŸ’—', 'â¤ï¸', 'ðŸ’•', 'ðŸ’ž'];
      const textos = ['Linda', 'Maravilhosa', 'Deusa', 'Perfeita', 'Gatona', 'Meu amor', '0 defeitos', 'Te amo ðŸ’–'];
      for (let i = 0; i < 25; i++) {
        const h = document.createElement('div');
        h.className = 'heart';
        h.textContent = Math.random() < 0.5
          ? emojis[Math.floor(Math.random() * emojis.length)]
          : textos[Math.floor(Math.random() * textos.length)];
        h.style.left = Math.random() * 100 + 'vw';
        h.style.fontSize = 10 + Math.random() * 20 + 'px';
        h.style.animationDuration = 5 + Math.random() * 5 + 's';
        h.style.animationDelay = Math.random() * 5 + 's';
        h.style.color = `rgb(${Math.random() * 255 | 0},${Math.random() * 255 | 0},${Math.random() * 255 | 0})`;
        bg.appendChild(h);
      }

      // Visualizador de Ã¡udio
      const audio = document.getElementById('player');
      audio.volume = 0.5;
      const canvas = document.getElementById('visualizador');
      const ctx = canvas.getContext('2d');
      const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      const source = audioCtx.createMediaElementSource(audio);
      const analyser = audioCtx.createAnalyser();
      analyser.fftSize = 32;
      source.connect(analyser);
      analyser.connect(audioCtx.destination);
      const dataArray = new Uint8Array(analyser.frequencyBinCount);

      function draw() {
        requestAnimationFrame(draw);
        analyser.getByteFrequencyData(dataArray);
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const barW = 5.5, gap = 4, n = 30, cx = canvas.width / 2;
        for (let i = 0; i < n / 2; i++) {
          const h = (dataArray[i] / 255) * canvas.height * 0.1;
          const y = (canvas.height - h) / 2 - 95;
          ctx.shadowColor = 'rgba(0, 0, 0, 0.9)';
          ctx.shadowBlur = 8;
          ctx.shadowOffsetX = 5;
          ctx.shadowOffsetY = 5;
          ctx.fillStyle = '#fff';
          ctx.fillRect(cx + i * (barW + gap), y, barW, h);
          ctx.fillRect(cx - (i + 1) * (barW + gap), y, barW, h);
        }
      }
      window.addEventListener('click', () => {
        if (audioCtx.state === 'suspended') audioCtx.resume();
        audio.play();
      });
      draw();

      const lyricsContainer = document.getElementById('lyrics-container');
      const lyrics = [
        { time: 0.82, text: "TerÃ§a de tarde" },
        { time: 2.24, text: "O tempo passa\n e eu com ela" },
        { time: 3.85, text: "NÃ£o quero que\n nunca passe" },
        { time: 5.51, text: "Minha brisa Ã©\n o rosto dela" },
        { time: 7.59, text: "JÃ¡ disse atÃ©\n pra mim:" },
        { time: 9.18, text: "Sem mais som\n de amor" },
        { time: 10.51, text: "Mas ficar\n sem escrever" },
        { time: 12.43, text: "Pra ela\n me dÃ¡\n atÃ© dor" },
        { time: 13.67, text: "TerÃ§a de tarde" },
        { time: 15.31, text: "Eu tÃ´\n cansado do\n meu trampo" },
        { time: 17.05, text: "Mas ver\n ela sÃ³ me\n olhando" },
        { time: 18.55, text: "TÃ¡\n me hipnotizando" },
        { time: 20.69, text: "EntÃ£o te peÃ§o:" },
        { time: 22.46, text: "Fica\n sÃ³\n mais um pouco" },
        { time: 24.41, text: "Continua\n agora" },
        { time: 25.58, text: "Bora\n ficar se amando" },
        { time: 32.35, text: "Bora ficar\n se amando" },
        { time: 39.68, text: "TerÃ§a de tarde" },
        { time: 41.78, text: "Ela em cima\n de mim" },
        { time: 43.26, text: "Me contando\n como foi" },
        { time: 44.53, text: "Seu dia e\n perguntando" },
        { time: 47.30, text: "E eu respondo:" },
        { time: 48.35, text: "Meu dia tÃ¡\n melhorando" },
        { time: 49.98, text: "Com vocÃª aqui" },
        { time: 51.23, text: "Tu Ã© uma\n canÃ§Ã£o e\n eu tÃ´ cantando" },
        { time: 54.67, text: "TerÃ§a de tarde" },
        { time: 55.98, text: "Ela\n sorri" },
        { time: 56.71, text: "Confesso\n que aquilo foi" },
        { time: 57.95, text: "A melhor\n coisa que\n eu vi" },
        { time: 59.54, text: "Deu a\n hora de\n ir embora" },
        { time: 61.41, text: "Levo\n ela\n pra casa" },
        { time: 62.97, text: "Volto feliz\n e sem graÃ§a" },
        { time: 64.57, text: "Com um\n sorriso\n na cara" }
      ];

      let currentLine = -1;

      function mostrarLetra(index) {
        lyricsContainer.innerHTML = '';
        const linha = document.createElement('div');
        linha.className = 'lyrics-line';
        linha.textContent = lyrics[index].text;
        lyricsContainer.appendChild(linha);
      }

      setInterval(() => {
        if (audio.readyState >= 2) {
          const tempoAtual = Math.floor(audio.currentTime);
          const offset = 0.4; // ajusta o tempo em segundos
          const novaLinha = lyrics.findIndex((l, i) =>
            (audio.currentTime >= (l.time - offset)) &&
            (i === lyrics.length - 1 || audio.currentTime < (lyrics[i + 1].time - offset))
          );

          if (novaLinha !== currentLine) {
            currentLine = novaLinha;
            if (novaLinha !== -1) mostrarLetra(novaLinha);
          }
        }
      }, 500);

      // Carrossel
      const carrossel = document.getElementById('carrossel');
      const indicadores = document.getElementById('indicadores').children;
      const totalSlides = carrossel.children.length;
      let slideAtual = 0;
      function atualizarCarrossel() {
        carrossel.style.transform = `translateX(-${slideAtual * 100}%)`;
        Array.from(indicadores).forEach((dot, i) => {
          dot.classList.toggle('ativo', i === slideAtual);
        });
      }
      setInterval(() => {
        slideAtual = (slideAtual + 1) % totalSlides;
        atualizarCarrossel();
      }, 4000);
      atualizarCarrossel();

      // Contador
      function atualizarContador() {
        const inicio = new Date('2025-04-30T00:00:00');
        const agora = new Date();
        const diferenca = agora - inicio;
        if (diferenca < 0) {
          document.getElementById("contador").textContent = "A data ainda nÃ£o chegou.";
          return;
        }
        let segundosTotais = Math.floor(diferenca / 1000);
        const meses = Math.floor(segundosTotais / (60 * 60 * 24 * 30));
        segundosTotais %= (60 * 60 * 24 * 30);
        const dias = Math.floor(segundosTotais / (60 * 60 * 24));
        segundosTotais %= (60 * 60 * 24);
        const horas = Math.floor(segundosTotais / 3600);
        segundosTotais %= 3600;
        const minutos = Math.floor(segundosTotais / 60);
        const segundos = segundosTotais % 60;
        document.getElementById("contador").textContent =
          `${meses}M ${dias}d ${horas}hr ${minutos}min ${segundos}s`;
      }
      atualizarContador();
      setInterval(atualizarContador, 1000);
    });
  </script>
</body>

</html>
