<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <title>Estrelado com Cometas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html,
    body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: radial-gradient(ellipse at bottom, #0b0c2a 0%, #000 100%);
      font-family: Arial, sans-serif;
      color: #fff;
      text-align: center;

    }


    /* Estrelas piscando */
    .estrela {
      position: absolute;
      width: 2px;
      height: 2px;
      background: rgb(255, 255, 255);
      border-radius: 50%;
      animation: brilhar 2s infinite ease-in-out;
      opacity: 0.8;
    }

    @keyframes brilhar {

      0%,
      100% {
        opacity: 0.2;
      }

      50% {
        opacity: 1;
      }
    }



    /* Cometas */
    .cometa {
      position: absolute;
      width: 150px;
      height: 2px;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0), rgb(255, 255, 255));
      opacity: 0.6;
      transform: rotate(60deg);
      animation: queda 10s ease-in-out infinite;
    }

    @keyframes queda {
      0% {
        transform: translate(-150px, -150px) rotate(55deg);
        opacity: 0;
      }

      20% {
        opacity: 1;
      }

      100% {
        transform: translate(100vw, 100vh) rotate(55deg);
        opacity: 0;
      }
    }


    /* Cora√ß√µes e palavras */
    .heart {
      position: absolute;
      font-size: 24px;
      animation: float 8s linear infinite;
      opacity: 0.8;
      z-index: 3;
    }

    @keyframes float {
      0% {
        transform: translateY(100vh) scale(1);
        opacity: 0;
      }

      50% {
        opacity: 1;
      }

      100% {
        transform: translateY(-10vh) scale(1.5);
        opacity: 0;
      }
    }

    #contador-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 4;
    }

    #foto-com-borda {
      padding: 8px;
      border-radius: 12px;
      display: inline-block;
      margin-bottom: 20px;
      animation: gradiente 5s ease infinite;
      background: linear-gradient(45deg, #000000, #00000000, #05154b);
      padding-bottom: 80px;
      background-size: 600% 600%;
    }

    @keyframes gradiente {
      0% {
        background-position: 0% 50%;
      }

      50% {
        background-position: 100% 50%;
      }

      100% {
        background-position: 0% 50%;
      }
    }

    #foto-com-borda img {
      width: 300px;
      height: 300px;
      object-fit: cover;
      border-radius: 8px;
    }

    #contador {
      background: linear-gradient(90deg, #ffffff, #484ac0, #ffffff);
      -webkit-background-clip: text;
      font-size: 1.8rem;
      -webkit-text-fill-color: transparent;
      font-weight: bold;
      animation: gradiente 5s ease infinite;
      -webkit-text-fill-color: linear-gradient(45deg, #ffffff, #00000000, #05154b);
      background-size: 600% 600%;
    }

    @keyframes gradientFlow {
      50% {
        background-position: 50%
      }

      100% {
        background-position: 100%
      }
    }

    h1 {
      font-size: 1.0rem;
      margin-bottom: 10px;
      text-shadow: 1px 1px 4px #000;
    }

    .nuvem {
      position: absolute;
      width: 200px;
      height: 60px;
      background: #fff;
      border-radius: 100px;
      opacity: 0.05;
      z-index: 0;
      animation: moverNuvem linear infinite;
      box-shadow:
        30px 0px 0px 0px #ffffff,
        60px 10px 0px 0px #ffffff,
        90px 0px 0px 0px #ffffff;
    }

    @keyframes moverNuvem {
      0% {
        left: -300px;
      }

      100% {
        left: 100vw;
      }
    }

    h1::before {
      content: "üíó";
      display: inline-block;
      animation: pulse 1s infinite;
      margin-right: 8px;
    }

    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.3);
      }

      100% {
        transform: scale(1);
      }
    }
  </style>
</head>

<body>

  <!-- üéµ Canvas visualizador de √°udio -->
  <canvas id="visualizador" style="position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%); z-index: 10;"
    width="550" height="240">
  </canvas>

  <!-- üéµ M√∫sica -->
  <audio id="player" autoplay loop crossorigin="anonymous">
    <source src="https://unwickbr.github.io/qr-code-site/Until%20I%20Found%20You.mp3" type="audio/mpeg">
  </audio>

  <!-- üíñ Contador com imagem -->
  <div id="contador-container">
    <div id="foto-com-borda">
      <img src="https://unwickbr.github.io/qr-code-site/Image.jpg" alt="Foto especial">
      <h1>Quanto tempo nos conhecemos:</h1>
      <div id="contador">Calculando...</div>
    </div>
  </div>

  <!-- üí´ Estrelas, cometas, nuvens, cora√ß√µes e visualizador -->
  <script>
    // Estrelas
    for (let i = 0; i < 150; i++) {
      const estrela = document.createElement("div");
      estrela.classList.add("estrela");
      estrela.style.top = `${Math.random() * 100}vh`;
      estrela.style.left = `${Math.random() * 100}vw`;
      estrela.style.animationDuration = `${1 + Math.random() * 2}s`;
      document.body.appendChild(estrela);
    }

    // Cometas
    for (let i = 0; i < 5; i++) {
      const cometa = document.createElement("div");
      cometa.classList.add("cometa");
      cometa.style.top = `${Math.random() * 2}vh`;
      cometa.style.left = `${-200 - Math.random() * 100}px`;
      cometa.style.animationDelay = `${Math.random() * 20}s`;
      document.body.appendChild(cometa);
    }

    // Nuvens
    for (let i = 0; i < 7; i++) {
      const nuvem = document.createElement("div");
      nuvem.classList.add("nuvem");
      const top = Math.floor(Math.random() * 80) + 2;
      nuvem.style.top = `${top}vh`;
      nuvem.style.animationDuration = `${60 + Math.random() * 40}s`;
      const scale = 0.5 + Math.random() * 1.5;
      nuvem.style.transform = `scale(${scale})`;
      document.body.appendChild(nuvem);
    }

    // Cora√ß√µes e palavras
    const emojis = ["üíñ", "üíò", "üíó", "‚ù§Ô∏è", "üíï", "üíû"];
    const textos = ["Linda", "Maravilhosa", "Deusa", "Perfeita", "Gatona", "Meu amor", "0 defeitos", "Te amo üíñ"];
    const total = 25;

    function corAleatoria() {
      const r = Math.floor(Math.random() * 256);
      const g = Math.floor(Math.random() * 256);
      const b = Math.floor(Math.random() * 256);
      return `rgb(${r}, ${g}, ${b})`;
    }

    for (let i = 0; i < total; i++) {
      const item = document.createElement("div");
      item.classList.add("heart");
      item.textContent = Math.random() < 0.5
        ? emojis[Math.floor(Math.random() * emojis.length)]
        : textos[Math.floor(Math.random() * textos.length)];
      item.style.left = Math.random() * 100 + "vw";
      item.style.fontSize = 10 + Math.random() * 20 + "px";
      item.style.animationDuration = 5 + Math.random() * 5 + "s";
      item.style.animationDelay = Math.random() * 5 + "s";
      item.style.color = corAleatoria();
      document.body.appendChild(item);
    }


    const audio = document.getElementById("player");
    const canvas = document.getElementById("visualizador");
    const ctx = canvas.getContext("2d");

    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const source = audioCtx.createMediaElementSource(audio);
    const analyser = audioCtx.createAnalyser();
    analyser.fftSize = 32;

    source.connect(analyser);
    analyser.connect(audioCtx.destination);

    const bufferLength = analyser.frequencyBinCount;
    const dataArray = new Uint8Array(bufferLength);

    const barCount = 6;
    const barWidth = 20;
    const spacing = 10;
    const cornerRadius = 3;

    function drawRoundedBar(x, y, width, height, radius, color) {
      ctx.beginPath();
      ctx.fillStyle = "rgba(255, 255, 255, 0.6)";
      ctx.moveTo(x + radius, y);
      ctx.lineTo(x + width - radius, y);
      ctx.quadraticCurveTo(x + width, y, x + width, y + radius);
      ctx.lineTo(x + width, y + height - radius);
      ctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);
      ctx.lineTo(x + radius, y + height);
      ctx.quadraticCurveTo(x, y + height, x, y + height - radius);
      ctx.lineTo(x, y + radius);
      ctx.quadraticCurveTo(x, y, x + radius, y);
      ctx.fill();
    }

    function draw() {
      requestAnimationFrame(draw);
      analyser.getByteFrequencyData(dataArray);

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const barWidth = 7;
      const barGap = 4;
      const numBars = 20;
      const centerX = canvas.width / 2;

      for (let i = 0; i < numBars / 2; i++) {
        const escalaAltura = 0.2;
        const height = (dataArray[i] / 255) * canvas.height * escalaAltura;

        const deslocamentoVertical = 95;
        const y = (canvas.height - height) / 2 - deslocamentoVertical;


        // barras √† direita do centro
        const xRight = centerX + i * (barWidth + barGap);
        drawRoundedBar(xRight, y, barWidth, height, cornerRadius);

        // barras √† esquerda do centro
        const xLeft = centerX - (i + 1) * (barWidth + barGap);
        drawRoundedBar(xLeft, y, barWidth, height, cornerRadius);
      }

    }

    // Libera o contexto de √°udio no clique
    window.addEventListener("click", () => {
      if (audioCtx.state === "suspended") {
        audioCtx.resume();
      }
      audio.play();
    });

    draw();

    // Ativa contexto de √°udio no clique
    window.addEventListener("click", () => {
      if (audioCtx.state === "suspended") {
        audioCtx.resume();
      }
      audio.play();
    });

    // ‚ö†Ô∏è Garante que o contexto de √°udio ativa ap√≥s clique
    window.addEventListener("click", () => {
      if (audioCtx.state === "suspended") {
        audioCtx.resume();
      }
      audio.play();
    });

    draw();

    // üï∞Ô∏è Contador desde 30/04/2025
    function atualizarContador() {
      const inicio = new Date('2025-04-30T00:00:00');
      const agora = new Date();
      const diferenca = agora - inicio;

      if (diferenca < 0) {
        document.getElementById("contador").textContent = "A data ainda n√£o chegou.";
        return;
      }

      const segundosTotais = Math.floor(diferenca / 1000);
      const dias = Math.floor(segundosTotais / 86400);
      const horas = Math.floor((segundosTotais % 86400) / 3600);
      const minutos = Math.floor((segundosTotais % 3600) / 60);
      const segundos = segundosTotais % 60;

      document.getElementById("contador").textContent =
        `${dias}d ${horas}h ${minutos}m ${segundos}s`;
    }

    window.addEventListener("DOMContentLoaded", () => {
      atualizarContador();
      setInterval(atualizarContador, 1000);
    });
  </script>
</body>

</html>
